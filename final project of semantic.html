<!doctype html>
<html lang="en">

<head>
    <link rel="stylesheet" href="https://openlayers.org/en/v3.20.1/css/ol.css" type="text/css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://openlayers.org/en/v3.20.1/build/ol-debug.js" type="text/javascript"></script>

    <title>#Assignment-4</title>
</head>

<body>
    <div id="map" class="map"></div>
    <div id="popup"></div>
    <div id="layertree">
        <div style="background: rgb(121, 121, 223);">
        <div class="input-group mb-3">
            <input type="text" class=" form-control" id="search" placeholder="Search">
            <div class="input-group-append">
                <button class="btn btn-success" onclick="getValueInput()" type="submit">Go</button>
            </div>
            
            <div>
                long = <p id="long"></p>
                lat = <p id="lat"></p>
            </div>

        </div>
    </div>
</div>


    <script type="text/javascript">

        ///////////////////////OSM/////////////////////////////////////////

        var osmSource = new ol.source.OSM()
        var osm = new ol.layer.Tile({
            source: osmSource
        })

        ///////////////////////interaction Draw//////////////////////////////  

        var drawSource = new ol.source.Vector()
        var drawLayer = new ol.layer.Vector({
            source: drawSource
        })
        var draw = new ol.interaction.Draw({
            source: drawSource,
            type: 'Point'
        })


        ////////////////////////overlay///////////////////////////////

        var overlay = new ol.Overlay({
            element: document.getElementById('popup')
        })

        var view = new ol.View({
            zoom: 5.9,
            center: ol.proj.fromLonLat([51, 33])
        })

        //////////////////add  map/////////////////// 

        var map = new ol.Map({
            target: 'map',
            view: view

        });
        //////////////////////////add layers to map////////////////////// 
        map.addLayer(osm)
        map.addControl(new ol.control.FullScreen())
        map.addLayer(drawLayer)
        map.addOverlay(overlay)

        // map.on('singleclick', function(evt) {


    </script>

    <script>
        var getValueInput = () => {
            var inputValue = document.getElementById("search").value;
            var inputValue = inputValue.charAt(0).toUpperCase() + inputValue.slice(1)
            // console.log(inputValue)
            var url = "https://dbpedia.org/sparql";
            var query = [
                `select * { <http://dbpedia.org/resource/${inputValue}> geo:lat ?lat ; geo:long ?long }`
            ].join(" ");
            var temp = url + "?query=" + encodeURIComponent(query) + "&format=xml"
            // console.log(temp)
        
            const xhttp = new XMLHttpRequest();
            xhttp.onload = function () {
                var xml = xhttp.respnseXML;
                document.getElementById('lat').innerHTML=xml.getElementsByTagName('literal')[0].nodeValue;
                document.getElementById('long').innerHTML=xml.getElementsByTagName('literal')[0].nodeValue;
  

            xhttp.open("GET", temp);
            xhttp.send();
        }
    }

    </script>

</body>

</html>